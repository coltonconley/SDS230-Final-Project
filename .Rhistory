knitr::opts_chunk$set(echo = TRUE)
getwd()
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
#An inefficient way to do it
BE$healthcare <- (BE$Hlth+BE$MedEq+BE$Chems+BE$Drugs+BE$LabEq)/5
BE$industrials <- (BE$Rubbr+BE$BldMt+BE$Cnstr+BE$Mach+BE$ElcEq+BE$Autos+BE$Aero+BE$Ships+BE$Mines+BE$FabPr)/10
#An inefficient way to do it
BE$healthcare <- (BE$Hlth+BE$MedEq+BE$Chems+BE$Drugs+BE$LabEq)/5
BE$industrials <- (BE$Rubbr+BE$BldMt+BE$Cnstr+BE$Mach+BE$ElcEq+BE$Autos+BE$Aero+BE$Ships+BE$Mines+BE$FabPr)/10
BE$TMT <- (BE$Fun+BE$Telcm+BE$PerSv+BE$BusSv+BE$Softw+BE$Chips)/6
BE$financials <- (BE$Banks+BE$Insur+BE$RlEst+BE$Fin)/4
BE$consumer <- (BE$Books+BE$Hshld+BE$Clths+BE$Rtail+BE$Meals+BE$Food+BE$Beer+BE$Smoke+BE$Toys)/10
BE$commodities <- (BE$Gold+BE$Steel+BE$Coal+BE$Oil+BE$Txtls)/5
BE$rother <- (BE$Other+BE$Trans+BE$Whlsl+BE$Boxes+BE$Guns+BE$Agric+BE$Paper+BE$Util)/8
knitr::opts_chunk$set(echo = TRUE)
BE <- read.csv("Average BE .csv")
View(BE)
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
View(BE)
View(BE)
View(returns)
size$Year <- substr(size$Year, 1, 4)
View(size)
unique(table(size$Year))
(table(size$Year))
returns$Year <- substr(size$Year, 1, 4)
returns$Year <- substr(return$Year, 1, 4)
View(returns)
as.integer(returns$Year)
returns$Year <- substr(return$Year, 1, 4)
View(returns)
returns$Year <- substr(return$Year, 1, 4)
as.character(returns$Year)
returns$Year <- substr(return$Year, 1, 4)
returns$Year <- as.character(returns$Year)
returns$Year <- substr(return$Year, 1, 4)
str(returns)
returns$Year <- substr(return$Year, 1, 4)
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
returns$Year <- substr(return$Year, 1, 4)
View(size)
aggregate(.~Year, data = size, mean)
View(size)
size <- aggregate(.~Year, data = size, mean)
View(BE)
View(size)
?merge
df <- merge3(BE, size, by = Year)
df <- merge(BE, size, by = Year)
df <- merge(BE, size, by = "Year")
View(df)
knitr::opts_chunk$set(echo = TRUE)
getwd()
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
size <- aggregate(.~Year, data = size, mean)
returns$Year <- substr(return$Year, 1, 4) #Ask what is going on here
View(BE)
?melt
install.packages("reshape")
library(reshape)
a <- melt(BE, id = c("Year"))
View(a)
BE <- melt(BE, id = c("Year"))
BE$YearInd <-
BE$BEMERatio <- BE$value
BE$value <- NULL
BE$Ind <- BE$variable
BE$variable <- NULL
knitr::opts_chunk$set(echo = TRUE)
library(reshape)
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
size <- aggregate(.~Year, data = size, mean)
returns$Year <- substr(return$Year, 1, 4) #Ask what is going on here
knitr::opts_chunk$set(echo = TRUE)
library(reshape)
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
size <- aggregate(.~Year, data = size, mean)
#returns$Year <- substr(return$Year, 1, 4) #Ask what is going on here
# separate year from month in "size" dataframe
#size$Year2 <- substr(size$Year, 1, 4)
#size$Month <- substr(size$Year, 5, 6)
# separate year from month in "returns" dataframe
#returns$Year2 <- substr(size$Year, 1, 4)
#returns$Month <- substr(size$Year, 5, 6)
# make an average by year for "size" dataframe
#table(size[size$Year2 == "1926",])
#apply(size[size$Year2 == "1926",], 2, mean)
#size[size$Year2 == "1926",]
#data.frame(size[], apply(size[,c(2:50)],2, mean) )
#table(size$Year2)
BE <- melt(BE, id = c("Year"))
BE$Ind <- BE$variable
BE$variable <- NULL
BE$BEMERatio <- BE$value
BE$value <- NULL
size <- melt(size, id = c("Year"))
View(size)
size$value <- size$size
knitr::opts_chunk$set(echo = TRUE)
library(reshape)
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
size <- aggregate(.~Year, data = size, mean)
#returns$Year <- substr(return$Year, 1, 4) #Ask what is going on here
# separate year from month in "size" dataframe
#size$Year2 <- substr(size$Year, 1, 4)
#size$Month <- substr(size$Year, 5, 6)
# separate year from month in "returns" dataframe
#returns$Year2 <- substr(size$Year, 1, 4)
#returns$Month <- substr(size$Year, 5, 6)
# make an average by year for "size" dataframe
#table(size[size$Year2 == "1926",])
#apply(size[size$Year2 == "1926",], 2, mean)
#size[size$Year2 == "1926",]
#data.frame(size[], apply(size[,c(2:50)],2, mean) )
#table(size$Year2)
BE <- melt(BE, id = c("Year"))
BE$Ind <- BE$variable
BE$variable <- NULL
BE$BEMERatio <- BE$value
BE$value <- NULL
size <- melt(size, id = c("Year"))
size$size <- size$value
size$value <- NULL
size$Ind <- size$variable
size$variable <- NULL
View(size)
size$YearInd <- paste(size$Year, size$Ind, sep = "_")
BE$YearInd <- paste(BE$Year, BE$Ind, sep = "_")
df <- merge(BE, size, by = "YearInd")
View(df)
df$YearInd <- NULL
df$Year.y <- NULL
df$Ind.y <- NULL
names(df)[1:2] <- c("Year", "Ind")
knitr::opts_chunk$set(echo = TRUE)
library(reshape)
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
knitr::opts_chunk$set(echo = TRUE)
library(reshape)
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- NA
size[size == -99.99] <- NA
returns[returns == -99.99] <- NA
View(BE)
View(returns)
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
size <- aggregate(.~Year, data = size, mean)
View(size)
knitr::opts_chunk$set(echo = TRUE)
library(reshape)
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
size <- aggregate(.~Year, data = size, mean)
View(size)
returns$Year <- substr(return$Year, 1, 4) #Ask what is going on here
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
size <- aggregate(.~Year, data = size, mean)
returns$Year <- substr(returns$Year, 1, 4) #Ask what is going on here
# separate year from month in "size" dataframe
#size$Year2 <- substr(size$Year, 1, 4)
#size$Month <- substr(size$Year, 5, 6)
# separate year from month in "returns" dataframe
#returns$Year2 <- substr(size$Year, 1, 4)
#returns$Month <- substr(size$Year, 5, 6)
# make an average by year for "size" dataframe
#table(size[size$Year2 == "1926",])
#apply(size[size$Year2 == "1926",], 2, mean)
#size[size$Year2 == "1926",]
#data.frame(size[], apply(size[,c(2:50)],2, mean) )
#table(size$Year2)
returns <- aggregate(.~Year, data = returns, mean)
View(returns)
View(returns)
View(BE)
BE <- melt(BE, id = c("Year"))
View(BE)
BE$Ind <- BE$variable
BE$variable <- NULL
BE$BEMERatio <- BE$value
BE$value <- NULL
View(BE)
size <- melt(size, id = c("Year"))
size$size <- size$value
size$value <- NULL
size$Ind <- size$variable
size$variable <- NULL
size$YearInd <- paste(size$Year, size$Ind, sep = "_")
BE$YearInd <- paste(BE$Year, BE$Ind, sep = "_")
df <- merge(BE, size, by = "YearInd")
View(df)
df$YearInd <- NULL
df$Year.y <- NULL
df$Ind.y <- NULL
names(df)[1:2] <- c("Year", "Ind")
View(df)
library(reshape)
BE <- read.csv("Average BE .csv")
size <- read.csv("Average Firm Size Monthly.csv")
returns <- read.csv("Average Weighted Returns Monthly.csv")
#BE <- BE[complete.cases(BE),]
#size <- size[complete.cases(size),]
#returns <- returns[complete.cases(returns),]
BE[BE== -99.99] <- 0
size[size == -99.99] <- 0
returns[returns == -99.99] <- 0
size$Year <- substr(size$Year, 1, 4) #Strip off all ofthe month values
size <- aggregate(.~Year, data = size, mean)
returns$Year <- substr(returns$Year, 1, 4) #Ask what is going on here
returns <- aggregate(.~Year, data = returns, mean)
#Kick off the last row so that we have same sized datasets.
BE <- BE[1:89,]
size <- size[1:89,]
returns <- melt(returns, id = c("Returns"))
returns <- melt(returns, id = c("Year"))
View(returns)
returns$returns <- returns$value
returns$value <- NULL
returns$Ind <- returns$variable
size$variable <- NULL
View(returns)
BE <- melt(BE, id = c("Year"))
BE$Ind <- BE$variable
BE$variable <- NULL
BE$BEMERatio <- BE$value
BE$value <- NULL
size <- melt(size, id = c("Year"))
size$size <- size$value
size$value <- NULL
size$Ind <- size$variable
size$variable <- NULL
df <- merge(c(size, BE, returns), by = "YearInd")
df <- merge(size, BE, by = "YearInd")
size$YearInd <- paste(size$Year, size$Ind, sep = "_")
BE$YearInd <- paste(BE$Year, BE$Ind, sep = "_")
returns$YearInd <- paste(returns$Year, BE$Ind, sep = "_")
df <- merge(size, BE, by = "YearInd")
df <- merge(df, returns, by = "YearInd")
View(df)
df$YearInd <- NULL
df$Year.y <- NULL
df$Ind.y <- NULL
df$variable <- NULL
df$Year <- NULL
df$Ind.x <- NULL
names(df)[1] <- "Year"
df$CompInd <- recode(df$Ind, "'Hlth' = 'Healthcare'; 'MedEq' = 'Healthcare'; 'Drugs' = 'Healthcare'; 'Chems' = 'Healthcare'; 'LabEq' = 'Healthcare'; 'Rubbr' = 'Industrials'; 'BldMt = 'Industrials'; 'Cnstr' = 'Industrials'; 'Mach' = 'Industrials'; 'ElcEq' = 'Industrials'; 'Autos' = 'Industrials'; 'Aero' = 'Industrials'; 'Ships' = 'Industrials'; 'Mines' = 'Industrials'; 'FabPr' = 'Industrials'; 'Fun' = 'TMT'; 'Telcm' = 'TMT'; 'PerSv' = 'TMT'; 'BusSv' = 'TMT'; 'Softw' = 'TMT'; 'Chips' = 'TMT'; 'Paper' = 'TMT'; 'Banks' = 'Financials'; 'Insur' = 'Financials'; 'RlEst' = 'Financials'; 'Fin' = 'Financials'; 'Food' = 'Consumer'; 'Soda' = 'Consumer'; 'Beer' = 'Consumer'; 'Smoke' = 'Consumer'; 'Books' = 'Consumer'; 'Clths' = 'Consumer'; 'Hshld' = 'Consumer'; 'Meals' = 'Consumer'; 'Rtail' = 'Consumer'; 'Util' = 'Utilities'; 'Gold' = 'Commondities'; 'Coal' = 'Commondities'; 'Oil' = 'Commondities'; 'Steel' = 'Commondities'; 'Txtls' = 'Commondities'; 'Other' = 'Other'; 'Trans' = 'Other'; 'Boxes' = 'Other'; 'Guns' = 'Other'; 'Whlsl' = 'Other'; 'Agric' = 'Other'; 'Toys' = 'Other'")
library(car)
